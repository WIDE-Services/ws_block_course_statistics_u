<?xml version="1.0" encoding="UTF-8"?>
<XMLDB PATH="blocks/course_statistics/db" VERSION="2020041024" COMMENT="XML DB file for Moodle blocks/course_statistics" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd">
    <TABLES>
        <!-- Frankenstyle DB table cs_user_course_sessions changed to block_course_statistics_cses -->
        <TABLE NAME="block_course_statistics_cses" COMMENT="All sessions of a user in a course">
            <FIELDS>
                <FIELD NAME="id" SEQUENCE="true" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="courseid" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="userid" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="startsession" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="false" />
                <FIELD NAME="endsession" SEQUENCE="false" TYPE="int" LENGTH="10" DEFAULT="0" NOTNULL="false" />
                <FIELD NAME="sessiontime" SEQUENCE="false" TYPE="int" LENGTH="10" DEFAULT="0" NOTNULL="false" />
                <FIELD NAME="actions" SEQUENCE="false" TYPE="int" LENGTH="5" DEFAULT="0" NOTNULL="false" />

            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id" />
                <KEY NAME="fk_courseid" TYPE="foreign" FIELDS="courseid" REFTABLE="course" REFFIELDS="id" />
                <KEY NAME="fk_userid" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" />
            </KEYS>
        </TABLE>

        <!-- Frankenstyle DB table cs_user_activity_sessions changed to block_course_statistics_ases -->
        <TABLE NAME="block_course_statistics_ases" COMMENT="Statistics of activity sessions of user in a course">
            <FIELDS>
                <FIELD NAME="id" SEQUENCE="true" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="courseid" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="userid" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="activity" SEQUENCE="false" TYPE="char" LENGTH="50" NOTNULL="false" />
                <FIELD NAME="cminstance" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="false" />
                <FIELD NAME="activitytitle" SEQUENCE="false" TYPE="char" LENGTH="300" DEFAULT="0" NOTNULL="false" />
                <FIELD NAME="activitytime" SEQUENCE="false" TYPE="int" LENGTH="10" DEFAULT="0" NOTNULL="false" />
                <FIELD NAME="activitysessions" SEQUENCE="false" TYPE="int" LENGTH="5" DEFAULT="0" NOTNULL="false" />
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id" />
                <KEY NAME="fk_courseid" TYPE="foreign" FIELDS="courseid" REFTABLE="course" REFFIELDS="id" />
                <KEY NAME="fk_userid" TYPE="foreign" FIELDS="userid" REFTABLE="user" REFFIELDS="id" />
            </KEYS>
        </TABLE>

        <!-- Frankenstyle DB table cs_activities_session_dates changed to block_course_statistics_sdt -->
        <TABLE NAME="block_course_statistics_sdt" COMMENT="Statistics for each activity individually. When an activity started and when ended.">
            <FIELDS>
                <FIELD NAME="id" SEQUENCE="true" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="asid" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="session" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="false" />
                <FIELD NAME="startsession" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="false" />
                <FIELD NAME="endsession" SEQUENCE="false" TYPE="int" LENGTH="10" DEFAULT="0" NOTNULL="false" />
                <FIELD NAME="sessiontime" SEQUENCE="false" TYPE="int" LENGTH="10" DEFAULT="0" NOTNULL="false" />
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id" />
                <KEY NAME="fk_asid" TYPE="foreign" FIELDS="asid" REFTABLE="cs_user_activity_sessions" REFFIELDS="id" />
            </KEYS>
        </TABLE>

        <!-- Frankenstyle DB table cs_course_measures changed to block_course_statistics_meas -->
        <TABLE NAME="block_course_statistics_meas" COMMENT="Contains the selected course by the admin/manger that measures will be calculated.">
            <FIELDS>
                <FIELD NAME="id" SEQUENCE="true" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="courseid" SEQUENCE="false" TYPE="int" LENGTH="10"  NOTNULL="false"  COMMENT="Course ID"/>
                <FIELD NAME="measure" SEQUENCE="false" TYPE="int" LENGTH="2" NOTNULL="false" DEFAULT="1" COMMENT="Measure"/>
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id" />
            </KEYS>
        </TABLE>

    </TABLES>
</XMLDB>